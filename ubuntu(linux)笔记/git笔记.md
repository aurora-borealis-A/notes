# 〇、全局配置

git完成安装后的全局配置

```bash
git config --global user.name "用户名"
git config --global user.email "邮箱地址"
```



# 一、本地仓库

## 1. git仓库初始化

在工作目录下执行：`git init`，会在当前目录创建一个隐藏的文件夹”.git“。



## 2. git工作流程

- `git status`：查看当前的工作状态（当前所处的分支）
- `git add 文件`：把文件（或目录）添加到仓库（repository）缓存区
- `git commit -m "注释"`：提交更改，把文件缓冲区的文件全部放入仓库。



## 3. 分支管理

### 3.1 提交图

- **提交结点**：

  - 在git中，版本管理是**以提交为单位的**，
  - 提交后（git commit），git都会创建一个提交结点，
  - 提交结点会记录下这次提交时的目录结构与文件内容更改。

- **提交图**：提交结点组成的有向无环图。

- **例如**：

  ```txt
  A───B───C───D───E───F───G───H
      │       │       │   
      │       └──DA───┘
      │
      └──BA──BB──BC──BD
              │
              └─BAA
  ```

  - A、B等各字母表示一个提交结点（实际上git中是以hash值来标识提交结点的）；
  - 提交结点之间的连线表示提交结点的”父子关系“。

### 3.2 分支与合并

- 分支：额外发展出一条独立的版本路线。

  - 在上述提交图的示例中，B结点中引出了两个提交结点：BA和C，

  - BA结点随后又延伸出BB、BC、BD结点，由BA、BB、BC、BD就组成了一条新的分支。

    - 同理，A-G也是分支，为主分支。

    - BAA和DA也是分支，只是比较短。

  - 不同的分支相互独立，代表不同代码版本发展方向的不同。

- 合并：将两个分支中的修改整合到一个分支中。

  - 在上述提交图中，F结点的前驱结点有两个：E和DA，

  - DA所在的分支 被合并到了 结点E所在的主分支。

    - 例如：将版本DA中新增的一段代码加入到版本E中，形成新版本F。

      

> 在实际项目中，分支被用于多人并行开发：
>
> - 每个分支对应一个模块，多个人在各自的分支中完成模块的功能；
> - 各分支完成后，将其合并到主分支中，主分支中的代码就拥有了各个模块的功能。

### 3.3 分支命令

- **显示分支**：
  - `git branch`：列出目前所有的分支
    - 只列出存在于本地的分支，运程仓库的分支不会列出。
  - `git branch -r`：列出远程仓库分支
  - `git branch -a`：列出所有分支，包括本地分支与远程分支。

- **创建分支**：
  - `git branch 分支名`：创建一个名为“分支名“的分支。
- **切换分支**：
  - `git checkout 分支名`：切换到名为“分支名”的分支。
  - `git checkout -b 分支名`：创建并切换到新分支。
- **合并分支**：
  - `git merge 分支名`：将名为“分支名”的分支 合并到当前分支。
    - 注意被合并的目标分支不能在使用状态。
- **删除分支**：
  - `git branch -d 分支名`：删除名为“分支名”的分支



### 3.4 head指针



## 4. 标签

- git给**每次提交赋予一个随机的哈希值（默认情况下）**:
  - 哈希值（40位16进制数）作为这次提交的唯一标识符。
  - 或者说每一次的提交都是无名的（仅以一堆数字作为标识符，而不是字符串）。
- 使用tag命令可以为每个提交**取一个别名**（字符串）：
  - `tag`可以为一次重大的提交取一个容易记的名称。
  - 例如：用`tag`将几次重大的提交取名为版本号：v1.0.0，v1.1.0等。
  - 提交有了标签后，此后任何对该提交的操作，都可以**用标签来指代这个提交**。

---

**tag用法**：

- `git tag`：查看当前所有标签（所有分支下）。
- `git tag 标签名`：为当前所处的
  - `git tag -a 标签名 -m 标签附注信息`：有时标签提供的精简的信息，需要为标签添加附注信息。

## 5. git版本回退

查看日志，找到要回退的版本号（提交序号）：

- `git log`：查看日志
- `git log --pretty=oneline`：查看日志，每条日志都只占一行，更精简

回退：

- **`git reset --hard 提交序号`**：回退到指定版本，所有文件都会恢复原样，像是坐了时光机

回到未来：

- `git reflog`：得到全部的引用日志，得到未来最新的版本号，之后用`git reset`回到未来

**注意：**

- 在旧版本中，用`git log`没法查看未来的最新版本，没法得到回来未来的提交序号，因此使用`git reflog`
  - `reflog`是`reference log`的缩写

- 版本号是哈希值，40位16进制数，在 git reset 时可以只输入前至少4个字符，git会自动补全版本号
  - 省略的版本号不能和别的省略的版本号重复，要含义明确


​	

# 二、线上远程仓库

## 1. github

**github是一个网站**:

- 这个网站使用了git工具来管理我们的仓库，同时也集成了其他方便的工具。

- 多人合作项目时，通过大家一起管理一个github的线上仓库来协调工作。

**工作流程**：

- **绑定**：远程仓库与本地仓库
  - 将线上的仓库**克隆到本地**；
  - 或者先创建本地仓库，然后增加为本地仓库绑定远程仓库。
- **开发**：在本地修改仓库库后，即：在本地进行正常的**开发工作**；
- **提交**：在本地完成工作后，将本地仓库**提交到线上**，以同步线上仓库。



> 当多人合作时，每个人都在自己的电脑上工作，工作完成后再提交到线上，别人也可以从线上获取最新的仓库，来继续修改仓库（项目）。



## 2. 绑定运程仓库

### 2.1 克隆仓库

#### 2.1.1 使用https

**克隆**：

- `git clone 仓库网址（http或https）`

- 将会复制网站（github）上的仓库到本地，就是把网上仓库的那个文件夹复制到本地。

**身份认证（两种途径）**：

- 修改配置文件：
  - 找到克隆的仓库中找到 `.git/config`文件，
  - 将`url = https://github.com/github用户名/仓库名.git`
    - 更改为（在github官网网址前加上用户名和密码）：
    - `url = https://用户名:密码@github.com/github用户名/仓库名.git`
  - 例如：`url = https://github.com/aurora-borealis-A/practice.git`
    - 更改为：`url = https://zw:123456@github.com/aurora-borealis-A/practice.git`


- 使用提示：在`git push`时（git push的用法在下面几行），终端会有提示窗口跳出，来进行身份认证（较新版本是这样的）

**注意：**

- 由于github是国外网站，使用http或https协议的话经常会连接不上，建议使用ssh（可以不用梯子）
- 添加代理：
  - `git config --global http.proxy=127.0.0.1:7890`
  - 或`git config --global https.proxy=127.0.0.1:7890`
  - 区别第一行是http，第二行是https。”proxy=“后跟"ip:端口号"

#### 2.1.2 使用ssh

**身份认证**：

- 生成ssh公私钥：`ssh-keygen -t rsa -C “注册邮箱”`
  - 公钥文件生成在`c:/user/user_name/.ssh`目录下，文件名为`id_rsa.pub`。
  - 私钥文件也在这个目录下，文件名为`id_rsa`。

- 上传公钥，保管私钥：
  - 用记事本打开公钥文件，复制里面的内容（公钥内容），
  - 然后到github中添加ssh公钥，在github的添加ssh公钥的页面把本地的公钥内容复制进去，
  - 相当于把公钥上传到线
  - 上了。私钥文件就放着不用管他。

**克隆**：`git clone ssh地址`

- ssh地址可以从github网页获取，或者熟悉ssh的话地址可以直接写：`git@github.com:用户名/仓库名`



> **背景知识**：ssh公私钥
>
> - ssh的公钥和私钥是一对钥匙，私钥由自己保管，公钥分发给别人，因此可以复制出很多份。
> - ssh公钥不仅可以给github，也可以给其他服务器或计算机，只要本地电脑可以和其他服务器进行网络通信就可以。
> - 在ssh通信中，公私钥的作用是身份验证，原本直接ssh远程连接服务器时，每次连接都需要输入密码，当把公钥给服务器后，就可以不输入密码（因为身份已经通过公私钥验证过了）直接连接
> - 一台电脑一个私钥够了，意味着一台电脑上公私钥只要**创建一次**



### 2.2 管理绑定

使用`git remote`管理本地绑定的远程仓库信息。

- **显示远程仓库信息**：

  - `git remote`：罗列当前本地仓库绑定的所有远程仓库。
  - `git remote -v`：更加详细地罗列远程仓库。
  - `git remote show 仓库名`：查看绑定的远程仓库的信息。

- **添加远程仓库**：

  - `git remote add 仓库名 仓库网址`：将本地仓库与远程仓库绑定

    - 仓库名：远程仓库在本地的名称（不一定跟远程仓库的原名一样）。
      - 将远程仓库克隆到本地时，本地记录的远程仓库默认名字是origin。

    - 仓库网址：就是远程仓库所在的网址，或者说url。

- **删除远程仓库**：

  - `git remote remove 仓库名`：取消与远程仓库的绑定。

- **修改远程仓库**：

  - `git remote set-url 仓库名 新地址`：更改远程仓库的地址。

**注意**：

- 这里说的添加远程仓库与删除运程仓库等，都指的是对本地保存的远程仓库的绑定信息的操作，而不是真的把远程仓库上的内容删除了。



## 3. 提交与同步

- `git pull`：从线上仓库读取内容，使本地仓库更新到与线上仓库同步的版本。
- `git push`：把本地仓库提交到线上，完成线上仓库的版本更新。
- `git fetch`：



## 4.忽略文件



# 三、附录

git
