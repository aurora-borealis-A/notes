# 全局配置

git完成安装后的全局配置

```bash
git config --global user.name "用户名"
git config --global user.email "邮箱地址"
```



# 创建本地仓库

## git仓库初始化

在工作目录下执行：`git init`，会在当前目录创建一个隐藏的文件夹”.git“。

## git工作流程

- `git status`：查看当前的工作状态
- `git add 文件`：把文件（或目录）添加到仓库（repository）缓存区
- `git commit -m "注释"`：把文件缓冲区的文件全部放入仓库

## git版本回退

查看日志，找到要回退的版本号（提交序号）：

- `git log`：查看日志
- `git log --pretty=oneline`：查看日志，每条日志都只占一行，更精简

回退：

- **`git reset --hard 提交序号`**：回退到指定版本，所有文件都会恢复原样，像是坐了时光机

回到未来：

- `git reflog`：得到全部的引用日志，得到未来最新的版本号，之后用`git reset`回到未来

**注意：**

- 在旧版本中，用`git log`没法查看未来的最新版本，没法得到回来未来的提交序号，因此使用`git reflog`
- `reflog`是`reference log`的缩写
- 版本号是哈希值，一长串，在 git reset 时可以只输入前至少4个字符，git会自动补全版本号
- 省略的版本号不能和别的省略的版本号重复，要含义明确



# 线上远程仓库

## github

github是一个网站，这个网站使用了git工具来管理我们的仓库，同时也集成了其他方便的工具。

多人合作项目时，通过大家一起管理一个github的线上仓库来协调工作。

对于个人来说，工作流程是：先将线上的仓库克隆到本地，在本地修改仓库库后，再提交到线上以同步线上仓库。对于他人来讲，工作流程也是这样。这样每个人都在自己的电脑上工作，工作完成后再提交到线上，别人也可以从线上获取最新的仓库，来继续修改仓库（项目）。

## 使用https管理

复制（克隆）线上仓库到本地：

- `git clone 仓库网址（http或https）`：复制网站（github）上的仓库到本地，就是把一个文件夹复制到本地

身份认证：

- 可以在 .git/.config文件中找到

  - > url = https://github.com/aurora-borealis-A/practice.git

  - 更改为（在github官网网址前加上用户名和密码）：

  - > url = https://用户名:密码@github.com/aurora-borealis-A/practice.git

- 或者在`git push`时（git push的用法在下面几行），bash会有提示窗口跳出，来进行身份认证（较新版本是这样的）

在本地仓库上修改内容后提交线上：

- `git push`：把本地仓库提交到线上，完成线上仓库的版本更新

拉取线上仓库：

- `git pull`：从线上仓库读取内容，使本地仓库更新到与线上仓库同步的版本

**注意：**

- 由于github是国外网站，使用http或https协议的话经常会连接不上，建议使用ssh（可以不用梯子）
- 添加代理：
  - `git config --global http.proxy=127.0.0.1:7890`
  - 或`git config --global https.proxy=127.0.0.1:7890`
  - 区别第一行是http，第二行是https。”proxy=“后跟"ip:端口号"

## 使用ssh管理

身份认证：

- 生成ssh公私钥：`ssh-keygen -t rsa -C “注册邮箱”`

- 公钥文件生成在`c:/user/user_name/.ssh`目录下，文件名为`id_rsa.pub`。私钥文件也在这个目录下，文件名为`id_rsa`。

- 用记事本打开公钥文件，复制里面的内容（公钥内容）。然后到github中添加ssh公钥，在github的添加ssh公钥的页面把本地的公钥内容复制进去，相当于把公钥上传到线上了。私钥文件就放着不用管他。

复制（克隆）线上仓库到本地：

- `git clone ssh地址`：复制网站（github）上的仓库到本地，就是把一个文件夹复制到本地。
- ssh地址可以从github网页获取，或者熟悉ssh的话地址可以直接写：`git@github.com:用户名/仓库名`

拉取线上仓库内容和上传本地仓库：

- `git pull`：从线上仓库读取内容，使本地仓库更新到与线上仓库同步的版本
- `git push`：把本地仓库提交到线上，完成线上仓库的版本更新

**注意：**

- 工作流程往往是先用git pull更新本地仓库的内容，然后开始修改仓库，修改后再用git push上传仓库
- ssh的公钥和私钥是一对钥匙，私钥由自己保管，公钥分发给别人，因此可以复制出很多份。
- ssh公钥不仅可以给github，也可以给其他服务器或计算机，只要本地电脑可以和其他服务器进行网络通信就可以。
- 在ssh通信中，公私钥的作用是身份验证，原本直接ssh远程连接服务器时，每次连接都需要输入密码，当把公钥给服务器后，就可以不输入密码（因为身份已经通过公私钥验证过了）直接连接
- 一台电脑一个私钥够了，意味着一台电脑上公私钥只要**创建一次**



# 分支管理

一个项目包含多个模块，多个模块如果一个做完再做另一个效率太慢，git引入了分支这个概念。一个项目可以分为多个分支，每个分支对应一个模块，多个人在各自的分支中完成模块的功能，就能实现多人并行（同时）在做一个项目。再一个分支完成后，可以将其合并到主分支中，可以简单看作将分支中的文件内容复制到主分支中。接下来这个被合并的分支就可以删除了。

分支是git的一个抽象的概念，不同分支间相互独立，即文件相互独立，例如：在a分支中创建的文件，在主分支是看不到的，当程序员在a分支中完成工作后，将a分支合并到主分支后，在主分支就有了a分支创建的文件。git鼓励使人们使用分支来协作完成项目。

```bash
git branch  # 列出目前所有的分支
git branch 分支名  # 创建一个名为“分支名的分支”
git checkout 分支名  # 切换到名为“分支名的分支”
git merge 分支名  # 将名为“分支名”的分支 合并到当前分支，注意被合并的目标分支不能在使用状态
git brach -d 分支名  # 删除名为“分支名”的分支
```



# 忽略文件